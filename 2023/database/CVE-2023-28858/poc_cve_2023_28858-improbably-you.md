# poc_cve_2023_28858

This PoC demonstrates the vulnerability described in CVE-2023-28858

| Infos    | Value                                                              |
| -------- | -------------------------------------------------------------------|
| Username | [https://github.com/improbably-you](https://github.com/improbably-you) |
| Url      | [https://github.com/improbably-you/poc_cve_2023_28858](https://github.com/improbably-you/poc_cve_2023_28858)                                               |
| Stars    | 1                                                          |
| License  | No License                                                        |

<details>

<summary>Topic / Tags</summary>



</details>

## Readme

# Proof of Concept (PoC) for CVE-2023-28858:

This PoC demonstrates the vulnerability described in CVE-2023-28858, where redis-py before 4.5.3 leaves a connection open after canceling an async Redis command during a pipeline operation, causing response data to be sent to the client of an unrelated request in an off-by-one manner.

## Prerequisites:
Make sure you have the following:
-   Python 3.7+
-   Redis server running on localhost:6379
-   Install vulnerable redis-py version (4.3.5): `pip install redis==4.3.5`

## Process
1. Save the PoC code as `poc_cve_2023_28858.py`:

2. Run the PoC script:

	`python poc_cve_2023_28858.py`

If the vulnerability is present, the output will show a mismatch between the expected and received values:
	
	Expected 'value1', got: value2

This demonstrates that the response data was sent to the client in an off-by-one manner due to the connection being left open after canceling the async Redis command during the pipeline operation. Updating redis-py to fixed versions 4.3.6, 4.4.3, or 4.5.3 will resolve this vulnerability.



## Get the content

```
git clone https://github.com/improbably-you/poc_cve_2023_28858
cd poc_cve_2023_28858
```

{% embed url="https://github.com/improbably-you/poc_cve_2023_28858" %}

<figure><img src="https://avatars.githubusercontent.com/u/19509967?v=4" alt=""><figcaption><p>improbably-you</p></figcaption></figure>
